---
title: "Lab One: Introduction and Basics"
author:
- Alex Davis
- Cody Adams
output: pdf_document
---

This lab serves as a primer to R by introducing the basics. It is advised to follow the lab via the .rmd file within RStudio rather than solely the compiled PDF. This way, students can experiment with code within the "code blocks" provided. __Note:__ References to R code are exclusively italicized. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Part I: R, as a Calculator

The first thing to know about R is that it is essentially a large calculator capable of performing arithmetic:

```{r calc, echo=TRUE}
1+1

8*8

2^8 # exponent

(5+2)^4

5+2^4

```

R also supports elementary and algebraic functions such as log and square root.

```{r functions, echo=TRUE}
log(100)

sqrt(49)
```

### Order of Operations

R solves equations according to the order of operations, "PEMDAS":

1. Parentheses
2. Exponents
3. Multiplication
4. Division
5. Addition
6. Subtraction

The following video provides a refresher on the order of operations: 
https://www.youtube.com/watch?v=94yAmf7GyHw
 
__Try this!__ Using R, solve:
(4+6)^2/(3-2)+8

```{r solve, echo=FALSE}

```

## Part II: Objects

R is an "object oriented" programming language. Put simply, R uses objects to store attributes. Objects can be used to store attributes. Objects are created by assigning an attibute to them via the <- operation. You can always view the attribute of an object by typing the object name.

```{r object 1, echo=TRUE}
object1 <- 10 + 10 
object1
```

__Try this!__ Objects can be named almost anything!

```{r object 2, echo=TRUE}


```

R includes various functions for managing created objects. The ls() function lists all existing objects.

```{r list, echo=TRUE}
ls()
```

The rm() function removes existing objects.

```{r remove, echo=TRUE}
rm(object1)
```

There is no strict convention for naming objects; however, there are best practices:

1. Avoid spaces, use _underscores_, periods, or CamelCase (or camelCase) for long object names.
    - e.g., This_is_a_long_name This.Is.A.Long.Name, thisIsALongName
2. Avoid names of existing functions or reserved R objects.
3. Be descriptive but keep it short (less than 10 characters).
4. Avoid special characters.
    - e.g., ? $ % ^ &

__Important:__ Object names are case sensitive.
    - object.One and Object.One refer to two separate objects.

```{r newobject, echo=TRUE}
object.One <- 10+10
Object.One <- 5+5

object.One
Object.One
```

## Part III: Functions

In addition to elementary and algebraic functions, R also include functions to simplify statistical analysis. For example, the _mean()_ functione exists to calculate mean. __Note:__ Sometimes _na.rm=TRUE_ is necessary within the paranetheses to instruct R to ignore missing data. 

```{r mean, echo=TRUE}
mean(cars$dist)
```

R includes the _cars_ data set, consisting of various information about cars. This data set is provided to help demonstrate and/or experiment with R functions.

A note about syntax: the dollar sign, $, is used to indicate the variable of interest relative to a data set. This is important in the case of multiple data sets that contain variables of the same name. In the previous code, R calculated the mean using the _dist_ variable within the _cars_ data set by specifying _cars\$dist_

To ignore missing data when calculating the mean of _dist_, include the _na.rm=TRUE_ argument within the paranetheses as follows.

```{r mean2, echo=TRUE}
mean(cars$dist, na.rm=TRUE)
```

__Note:__ Given the mean is exactly the same, it is unlikely there is any missing data in the _dist_ variable.

### Object Types

Object types are improtant in R and the type of an object is contingent on the attribute stored by the object. Put simply, an object storing characters (e.g., "blue") has a different type than an object storing a number (e.g., 1). Use of R functions is contingent on the type of objects. For example, functions like _mean()_ work only for objects containing numbers. The R _str()_ function describes the structure of objects and functions.

```{r structure, echo=TRUE}
str(mean)
str(object.One)
str(cars)
str(cars$dist)
```

The _str()_ function described _mean_ as a function, _object.One_ as a numeric object, the _cars_ data is a data frame, etc. 

Previously, objects were introduced as a method of storing single attributes, either a specified value or the result of arithmetic. In addition, objects can contain a collection of data via a vector or list. In mathematics and physics, a vector is defined as a quantity of both direction and magnitude. In R, vectors are defined a collection of data of the same type. The _c()_ function creates a vector.

```{r, vector, echo=TRUE}
vectorObject <- c(1,2,3)
vectorObject
str(vectorObject)
```

Further, a list is defined as a collection of multiple data types.

```{r list, echo-TRUE}
listObject <- list("your name", 1, F)
listObject
str(listObject)
```

__Note:__ The structure of the list object consists of a character, a number, and a logic (True/False).

## Part IV: Packages

Packages expand R to include additional functions important to statistical analysis. The default R functions may not be inadequate or complicated to conducting certain analysis.

### Installing Packages

Installing packages in R is performed via _install.packages("package\_name")_, whereby the name of the desired package must be within quotation marks.

__Note:__ Occasionally a package may require dependencies for installation. The dependencies can be automatically installed along with the package by including the _dependencies=TRUE_ argument within the _install.packages()_ function.

__Try this!__ In R, install: In your own code chunk, include the following (without the numbers):

1. _car_
2. _psych_
3. _memisc_
4. _Rcpp_

```{r install packages, echo=FALSE, eval=FALSE}

```

### Loading Packages

Installed packages must be loaded to use their functions within R. Packages are loaded via _library(package\_name)_, whereby the name of the desired package must be within parantheses.
__Note:__ Unlike the _install.packages()_ function, the _library()_ function does not use quotation marks around the package name. 

```{r library packages, echo=FALSE}
library(car)
library(psych)
library(memisc) 
library(Rcpp)
library(rmarkdown)
library(knitr)
```

__Note:__ The _memisc_ package contains object/package conflicts with the _car_ package for the _recode_ object. A conflict occurs when two packages contain objects (e.g., functions) of the same name. A conflict will not prevent loading packages; however, use of a specific package's object requires an explicit call to the desired parent package. For example, to use the _recode()_ function from _car_, the _car::recode(variable)_ statement will explicitly call _recode()_ from the _car_ package. Vice versa, _memisc::recode()_ will explicitly call _recode()_ from the _memisc_ package.

### Updating Packages

Most packages are regularly updated. The  _old.packages()_ function compares installed packages to their latest versions online.

```{r old, echo=TRUE}

```

The _update.packages()_ function updates out of date packages. 
__Note:__ Updating packages requires consent. The _ask=FALSE_ argument will skip the additional consent step to save time.

```{r update, echo=TRUE}

```

The _library()_ function lists currently loaded packages.

```{r library, echo=TRUE}
library()
```

As previously demonstrated, occasionally conflicts exist between packages. The _conflicts()_ lists conflicts between loaded packages.

```{r conflicts, echo=TRUE}
conflicts()
```

The _detach()_ function detaches packages and is an alternative method to resolve conflicts. Supplying _unload=TRUE_ argument within the _detach()_ function will unload the package. For example, to resolve the _recode()_ function conflict between _car_ and _memisc_, the memisc package can be detached and unloaded as follows: _detach(package:memisc, unload=TRUE)_.

```{r detach, echo=TRUE}

```

## Part V: R Help

R includes a help function to assist with functions, accessible by including a _?_ prior to the function name.

```{r help, echo=TRUE}
? mean
```

__Note:__ The help documentation will display in the bottom right quadrant of RStudio. Alternatively, typing the function name into the help search bar will yield a similar result. 

To search all of R documentation for help about a function, use _??_.

```{r search, echo=TRUE}
?? mean
```

__Note:__ Google is a valuable tool for finding help. Large communities like StackExchange consist of answers and explanations to common issues in R. At times a particular problem may seem unique, but someone else has almost certainly had the same problem and the solution likely can be found online.

## Part VI: Setting a Working Directory

The working directory is the location where files accessed and saved within a R session. Normally, the working directory is set at the beginning of every R file. The working directory should be set and the class data set at the beginning of each lab.

There are two methods of setting the working directory. First, the _setwd()_ function can be used with the directory path. For example, _setwd("C:/Directory\_to\_folder/")_. __Note:__ Forward slashes are used in place of backward slashes for directory paths.

Second, within RStudio, the "Session" tab will set the working directory. The following steps provide guidance to the "Session" tab functionality: 

1. Click the "Session" tab.
2. Select "Set Working Directory."
3. Select "Choose Directory."
4. Select the working directory.

The _getwd()_ function returns the set working directory.

```{r directory, echo=TRUE}
getwd()
```

## Part VII: Importing Your Data

Data sets should be downloaded from the GitHub repository, http://www.need_url.com. __Note:__ The data set should be saved within the working directory.

Data sets are commonly saved with the comma separated value file extension (e.g., .csv). CSV files stores data similar to the Excel spreadsheet data structure, and therefore can be viewed easily within Excel. 

__Note:__ Be careful when accessing CSV files within Excel. Excel removes leading zeroes from values, which may impact the integrity of your data if you save the file after viewing in Excel.

Loading a data set from a CSV file into R requires loading the data set with a function, and saving the contents of that data set to an object. For example, _data\_set\_name <- read.csv("file\_name.csv", header=TRUE)_. The _header=TRUE_ argument specifies that the "first row" of the CSV file contains the variable names for that data set's columns. If the CSV file does not contain the variable names in the first row, you can change _TRUE_ to _FALSE_.

For labs, the following code should look like this:

_ds <- read.csv("Class Data Set Factored.csv", header = TRUE)_

__Try it!__ Load a data set.

```{r import, echo=TRUE}
ds <- read.csv("https://github.com/ripberjt/qrmlabs/raw/master/Class%20Data%20Set%20Factored.csv", header = TRUE)
```

The name of a data set object can be anything. The best practice is to use an acronym, such as _ds_.

## Part VIII: Connecting to Your Data

Imported data can be accessed various ways. First, variables can be directly accessed by attaching the data set via the _attach()_ function. For example, _attach(ds)_.

Attached data can be detached via a similar function, _detact()_. For example, _detach(ds)_.

However, the _attch()_ function is not the recommended method. Instead, variables can be accessed by joining the data set object name and the variable name via the dollar sign, _$_. For example, _ds$variable_

The following exemplifies this method using the _dist_ variable within the _car_ package, within the _mean()_ function.

```{r var, echo=TRUE}
mean(cars$dist, na.rm = TRUE)
```

Using the class data set stored in the _ds_ object, there exists an _age_ variable. The _mean()_ function can provide the mean age of this data set.

```{r age, echo=TRUE}
mean(ds$age, na.rm = TRUE)
```

Additionally, there is a variable _income_ within _ds_. __Try it!__ Find the mean of the _income_ variable:

```{r income, echo=TRUE}

```

__Note:__ The _na.rm=TRUE_ argument is required within the _mean()_ function to avoid a NA result.

## Part IX: Exporting a CSV

Saving a CSV data set can be performed via the _write.csv()_ function by specifying the object to save and the file name to write. For example, _write.csv(data\_set\_name, file = "filename.csv")_.

To demonstrate, the _ds_ data set is saved as newds.csv within the working directory. 

```{r export, echo=TRUE}
write.csv(ds, file = "newds.csv")
```